<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>User Dashboard</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<div class="container my-4">
    <h1 class="text-center">User Dashboard</h1>
    <div class="row mt-5">
        <!-- Charts Section -->
        <div class="col-md-8">
            <h3>Data Overview</h3>
            <canvas id="userStageChart"></canvas>
        </div>

        <!-- Reporting Section -->
        <div class="col-md-4">
            <h3>Reports</h3>
            <ul class="list-group">
                <li class="list-group-item">
                    <a href="/reports/stage/Concept" class="btn btn-outline-primary w-100">Download Concept Report</a>
                </li>
                <li class="list-group-item">
                    <a href="/reports/stage/Development" class="btn btn-outline-primary w-100">Download Development Report</a>
                </li>
                <li class="list-group-item">
                    <a href="/reports/stage/Testing" class="btn btn-outline-primary w-100">Download Testing Report</a>
                </li>
                <li class="list-group-item">
                    <a href="/reports/stage/Launch" class="btn btn-outline-primary w-100">Download Launch Report</a>
                </li>
                <li class="list-group-item">
                    <a href="/reports/stage/End-of-Life" class="btn btn-outline-primary w-100">Download End-of-Life Report</a>
                </li>
            </ul>
        </div>
    </div>
</div>

<script>
    // Simulated data for charts
    var labels = ["Concept", "Development", "Testing", "Launch", "End-of-Life"];
    var data = [12, 15, 8, 10, 6]; // Replace with dynamic values if available

    var ctx = document.getElementById('userStageChart').getContext('2d');
    var userStageChart = new Chart(ctx, {
        type: 'bar',
        data: {
            labels: labels,
            datasets: [{
                label: 'Products by Stage',
                data: data,
                backgroundColor: ['#ff6384', '#36a2eb', '#ffcd56', '#4bc0c0', '#9966ff'],
            }]
        },
        options: {
            responsive: true,
            plugins: {
                legend: {
                    display: true,
                    position: 'top',
                },
                tooltip: {
                    callbacks: {
                        label: function(tooltipItem) {
                            return tooltipItem.label + ": " + tooltipItem.raw + " products";
                        }
                    }
                }
            }
        }
    });
</script>
</body>
</html>